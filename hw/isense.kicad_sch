(kicad_sch (version 20230121) (generator eeschema)

  (uuid 09f3918f-6125-496e-909f-4399599b23f8)

  (paper "A4")

  (lib_symbols
    (symbol "Amplifier_Current:INA240A3D" (pin_names (offset 0.127)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 3.81 3.81 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "INA240A3D" (at 3.81 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" (at 0 -16.51 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "http://www.ti.com/lit/ds/symlink/ina240.pdf" (at 3.81 3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "current monitor shunt sensor bidirectional high low" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "High- and Low-Side, Bidirectional, Zero-Drift, Current-Sense Amplifier With Enhanced PWM Rejection, 100V/V, SOIC-8" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "SOIC*3.9x4.9mm*P1.27mm*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "INA240A3D_0_1"
        (polyline
          (pts
            (xy 5.08 0)
            (xy -5.08 5.08)
            (xy -5.08 -5.08)
            (xy 5.08 0)
          )
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "INA240A3D_1_1"
        (pin input line (at -7.62 -2.54 0) (length 2.54)
          (name "-" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 -7.62 90) (length 3.81)
          (name "GND" (effects (font (size 1.016 1.016))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -7.62 90) (length 5.08)
          (name "REF2" (effects (font (size 0.508 0.508))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -2.54 -7.62 90) (length 3.81) hide
          (name "GND" (effects (font (size 1.016 1.016))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin output line (at 7.62 0 180) (length 2.54)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -2.54 7.62 270) (length 3.81)
          (name "V+" (effects (font (size 1.016 1.016))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 2.54 -7.62 90) (length 6.35)
          (name "REF1" (effects (font (size 0.508 0.508))))
          (number "7" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -7.62 2.54 0) (length 2.54)
          (name "+" (effects (font (size 1.27 1.27))))
          (number "8" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:C_Small" (pin_numbers hide) (pin_names (offset 0.254) hide) (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.254 1.778 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C_Small" (at 0.254 -2.032 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "capacitor cap" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Unpolarized capacitor, small symbol" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "C_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_Small_0_1"
        (polyline
          (pts
            (xy -1.524 -0.508)
            (xy 1.524 -0.508)
          )
          (stroke (width 0.3302) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.524 0.508)
            (xy 1.524 0.508)
          )
          (stroke (width 0.3048) (type default))
          (fill (type none))
        )
      )
      (symbol "C_Small_1_1"
        (pin passive line (at 0 2.54 270) (length 2.032)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -2.54 90) (length 2.032)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:R_Small" (pin_numbers hide) (pin_names (offset 0.254) hide) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 0.762 0.508 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "R_Small" (at 0.762 -1.016 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor, small symbol" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_Small_0_1"
        (rectangle (start -0.762 1.778) (end 0.762 -1.778)
          (stroke (width 0.2032) (type default))
          (fill (type none))
        )
      )
      (symbol "R_Small_1_1"
        (pin passive line (at 0 2.54 270) (length 0.762)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -2.54 90) (length 0.762)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 138.43 140.97) (diameter 0) (color 0 0 0 0)
    (uuid 08737e80-c886-4081-b38a-4060d6e4613c)
  )
  (junction (at 95.885 108.585) (diameter 0) (color 0 0 0 0)
    (uuid 213f74dd-c25f-4978-88d2-6fff5c9bbf1c)
  )
  (junction (at 151.892 113.665) (diameter 0) (color 0 0 0 0)
    (uuid 484dd0f5-437e-410b-b116-69dd00ce1b0f)
  )
  (junction (at 135.89 140.97) (diameter 0) (color 0 0 0 0)
    (uuid 56a4c7b7-d0b0-42cd-b502-aa04fdfc4999)
  )
  (junction (at 115.57 140.97) (diameter 0) (color 0 0 0 0)
    (uuid 5aabd282-dd91-43b7-87a7-f307c0f16feb)
  )
  (junction (at 95.885 103.505) (diameter 0) (color 0 0 0 0)
    (uuid 9e3ce3de-383a-40d5-9084-a1f5348ba1f7)
  )
  (junction (at 115.57 78.74) (diameter 0) (color 0 0 0 0)
    (uuid a40689e1-aa6a-4aca-ba0c-76fde9e44f76)
  )

  (wire (pts (xy 201.93 106.045) (xy 146.05 106.045))
    (stroke (width 0) (type default))
    (uuid 0b833451-e518-4492-bf1e-c22bb5b913e4)
  )
  (wire (pts (xy 151.892 135.382) (xy 151.892 141.097))
    (stroke (width 0) (type default))
    (uuid 11d23577-a5c1-4193-8444-c3458289c89a)
  )
  (wire (pts (xy 138.43 141.097) (xy 138.43 140.97))
    (stroke (width 0) (type default))
    (uuid 138a7b21-57af-41d6-95c8-f7d35b7db2cc)
  )
  (wire (pts (xy 151.892 113.665) (xy 151.892 130.302))
    (stroke (width 0) (type default))
    (uuid 19d740f1-103a-4c5b-a85f-e49c96179e6a)
  )
  (wire (pts (xy 138.43 113.665) (xy 138.43 140.97))
    (stroke (width 0) (type default))
    (uuid 1ebff960-7766-4367-a85e-7d4ba3ce764f)
  )
  (wire (pts (xy 95.885 103.505) (xy 130.81 103.505))
    (stroke (width 0) (type default))
    (uuid 243e6e42-bc37-4e93-9637-faae2e2bd55d)
  )
  (wire (pts (xy 115.57 78.74) (xy 135.89 78.74))
    (stroke (width 0) (type default))
    (uuid 2ffc210d-70fb-4862-be73-b1923ea32037)
  )
  (wire (pts (xy 85.725 119.38) (xy 95.885 119.38))
    (stroke (width 0) (type default))
    (uuid 350965c7-e838-4902-a472-2ebcc16e6893)
  )
  (wire (pts (xy 95.885 108.585) (xy 95.885 119.38))
    (stroke (width 0) (type default))
    (uuid 37dc9220-e68e-4e10-ad27-4f01874e0274)
  )
  (wire (pts (xy 85.725 78.74) (xy 115.57 78.74))
    (stroke (width 0) (type default))
    (uuid 3ea47645-d7ed-4878-8070-a2c07a8d3478)
  )
  (wire (pts (xy 85.725 140.97) (xy 115.57 140.97))
    (stroke (width 0) (type default))
    (uuid 3f31f57b-2788-4022-bd30-d0cc07c91214)
  )
  (wire (pts (xy 115.57 135.128) (xy 115.57 140.97))
    (stroke (width 0) (type default))
    (uuid 4427e4d9-20ff-4a15-aa61-84788bd8d109)
  )
  (wire (pts (xy 155.448 113.665) (xy 151.892 113.665))
    (stroke (width 0) (type default))
    (uuid 56caf18e-2276-40b1-aae1-bcd5f2978cad)
  )
  (wire (pts (xy 135.89 78.74) (xy 135.89 98.425))
    (stroke (width 0) (type default))
    (uuid 5933a70d-766b-43b5-bcaa-cf29f992d2e5)
  )
  (wire (pts (xy 85.725 89.535) (xy 95.885 89.535))
    (stroke (width 0) (type default))
    (uuid 59cfa782-37b0-4414-9ab2-b0df59b1b663)
  )
  (wire (pts (xy 151.892 141.097) (xy 138.43 141.097))
    (stroke (width 0) (type default))
    (uuid 898d054e-9cfb-4605-b929-73eb89f0cfec)
  )
  (wire (pts (xy 140.97 113.665) (xy 151.892 113.665))
    (stroke (width 0) (type default))
    (uuid 96f9c203-9da9-42b4-909e-159130c56d45)
  )
  (wire (pts (xy 115.57 140.97) (xy 135.89 140.97))
    (stroke (width 0) (type default))
    (uuid bd59a238-305c-4898-9026-c8300e2a8693)
  )
  (wire (pts (xy 135.89 113.665) (xy 135.89 140.97))
    (stroke (width 0) (type default))
    (uuid c1459b7f-e092-4cd1-a8e4-aaec532179bd)
  )
  (wire (pts (xy 85.725 71.12) (xy 155.448 71.12))
    (stroke (width 0) (type default))
    (uuid c947188a-b1d2-48a4-9996-2ef0b5c34858)
  )
  (wire (pts (xy 155.448 71.12) (xy 155.448 113.665))
    (stroke (width 0) (type default))
    (uuid cc3db074-2030-4f54-a6f3-ef7aad34fea7)
  )
  (wire (pts (xy 115.57 78.74) (xy 115.57 130.048))
    (stroke (width 0) (type default))
    (uuid cd2bca8e-9cf8-4507-a7c8-24efd0ded8c2)
  )
  (wire (pts (xy 138.43 140.97) (xy 135.89 140.97))
    (stroke (width 0) (type default))
    (uuid d53f6385-e4b4-4e71-9df6-3c86200e8375)
  )
  (wire (pts (xy 95.885 108.585) (xy 130.81 108.585))
    (stroke (width 0) (type default))
    (uuid f44896e1-deb1-4d21-9d71-f2eb07bc9de5)
  )
  (wire (pts (xy 95.885 89.535) (xy 95.885 103.505))
    (stroke (width 0) (type default))
    (uuid fe122f93-8289-4e36-b4ab-b835695d496a)
  )

  (text "VoutMax = 3.3V\nVdiff=3.3/2/50=33mV\nRsense = Vdiff / IMax = 33mV/5A =6.6mΩ\nPrsense = 6.6e-3 * (5)^2 = 165mw"
    (at 75.946 60.452 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 035bf012-d5e8-4879-8238-1162b9cd6d23)
  )

  (hierarchical_label "ISENSE" (shape output) (at 201.93 106.045 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid 5469cc8b-6d34-49d6-a3dd-dd4a439f7c05)
  )
  (hierarchical_label "VSUPPLY" (shape input) (at 85.725 78.74 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 5e128e48-b1e3-4b45-9a93-708ec31279d4)
  )
  (hierarchical_label "GND" (shape passive) (at 85.725 140.97 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid 999d437c-ef1a-4d34-b4a6-e85a5a2518ae)
  )
  (hierarchical_label "SENSE+" (shape input) (at 85.725 89.535 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid b7eca588-9258-4a6a-b656-22f9626c860a)
  )
  (hierarchical_label "VREF" (shape input) (at 85.725 71.12 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid f179dc22-f9e8-43b9-b814-0935b1d78205)
  )
  (hierarchical_label "SENSE-" (shape input) (at 85.725 119.38 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid f27fadb4-0083-4cac-8023-55f237bf3761)
  )

  (symbol (lib_id "Device:C_Small") (at 115.57 132.588 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 11e105ea-186d-440b-8e64-b90d3a6e0a65)
    (property "Reference" "C9" (at 118.11 131.318 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100n" (at 118.11 133.858 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric" (at 115.57 132.588 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 115.57 132.588 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Rating" "50V" (at 120.65 136.398 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "LCSC" "C307331" (at 115.57 132.588 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 5be01b74-856e-414c-9c85-3ebae96817b3))
    (pin "2" (uuid e73cbc1c-bb23-44fa-9e9e-d634c63dc4ad))
    (instances
      (project "foc8313"
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9"
          (reference "C9") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/4c6c6d09-876f-4eba-b2a4-6d544596feb9"
          (reference "C20") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/1cc54603-d82e-415c-bbf9-5b5f12638dae"
          (reference "C23") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/cbef46e6-2abc-49e9-9115-5032ed0b40d4"
          (reference "C26") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:C_Small") (at 151.892 132.842 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 41626d57-0d97-48e1-a0d4-320181aff148)
    (property "Reference" "C9" (at 154.432 131.572 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100n" (at 154.432 134.112 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric" (at 151.892 132.842 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 151.892 132.842 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Rating" "50V" (at 156.972 136.652 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "LCSC" "C307331" (at 151.892 132.842 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid f7196336-e4e0-4711-9180-d130a91758bb))
    (pin "2" (uuid fa0c7819-e50a-40a3-9cc2-62f028d34537))
    (instances
      (project "foc8313"
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9"
          (reference "C9") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/4c6c6d09-876f-4eba-b2a4-6d544596feb9"
          (reference "C4") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/1cc54603-d82e-415c-bbf9-5b5f12638dae"
          (reference "C24") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/cbef46e6-2abc-49e9-9115-5032ed0b40d4"
          (reference "C27") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Amplifier_Current:INA240A3D") (at 138.43 106.045 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid a4e3f164-66cb-4256-af44-2157c79dda47)
    (property "Reference" "U3" (at 142.24 103.505 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "INA240A2D" (at 143.51 109.855 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" (at 138.43 122.555 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "http://www.ti.com/lit/ds/symlink/ina240.pdf" (at 142.24 102.235 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C2060768" (at 138.43 106.045 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 5b40b0b8-b4c7-4365-ad8e-b6e4863339a1))
    (pin "2" (uuid 36c7684c-60c2-4d1e-8c58-8bd832058e85))
    (pin "3" (uuid 3c90710a-b41c-4b78-b9d0-91741f2d137c))
    (pin "4" (uuid 6f72a790-0602-4549-bbff-deced1025134))
    (pin "5" (uuid 4f50b5cb-e8e1-4ab8-a6ed-4da8a645de10))
    (pin "6" (uuid 8c35b4ab-6ccc-4bcd-b63c-8f86820d39e9))
    (pin "7" (uuid f0b1f9ed-21c0-4664-ade7-be9eabecdf5b))
    (pin "8" (uuid 83c76a35-b821-4df8-a186-a7b8da0a7f1c))
    (instances
      (project "smart_servo"
        (path "/3d5cfc11-2b2d-4555-a7d7-dadab43e84fa"
          (reference "U3") (unit 1)
        )
      )
      (project "foc8313"
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9"
          (reference "U5") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/4c6c6d09-876f-4eba-b2a4-6d544596feb9"
          (reference "U4") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/1cc54603-d82e-415c-bbf9-5b5f12638dae"
          (reference "U5") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/cbef46e6-2abc-49e9-9115-5032ed0b40d4"
          (reference "U8") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R_Small") (at 95.885 106.045 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid f0f9a0d4-316a-40f3-9815-34c056c34000)
    (property "Reference" "R10" (at 92.075 103.505 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "6m" (at 92.075 106.045 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Resistor_SMD:R_0805_2012Metric" (at 95.885 106.045 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 95.885 106.045 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "LCSC" "C728268" (at 95.885 106.045 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 6be89a44-78ca-4bde-8f1c-9986485cfa0b))
    (pin "2" (uuid 8fa5b984-9ba9-4dbe-826f-fcf5c599d5df))
    (instances
      (project "smart_servo"
        (path "/3d5cfc11-2b2d-4555-a7d7-dadab43e84fa"
          (reference "R10") (unit 1)
        )
      )
      (project "foc8313"
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9"
          (reference "R4") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/4c6c6d09-876f-4eba-b2a4-6d544596feb9"
          (reference "R4") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/1cc54603-d82e-415c-bbf9-5b5f12638dae"
          (reference "R8") (unit 1)
        )
        (path "/6a0f293a-1ae1-497a-a3c1-0d8f9e6f81b9/cbef46e6-2abc-49e9-9115-5032ed0b40d4"
          (reference "R15") (unit 1)
        )
      )
    )
  )
)
